from config import *
from data_utils.extract_pe_features import *
from data_utils.bin_to_img import *
from data_utils.extract_opcode import *


def main():
    print(f'DATA_CSV_FILENAME {ORG_DATASET_PATH}')
    max_files = 0  # set 0 to process all files or set a specific number

    extract_pe_features(ORG_DATASET_FEATURES_CSV, ORG_DATASET_COUNT_CSV, ORG_DATASET_PATH, max_files=max_files)

    list_of_widths = [0, 1, 64, 128, 256, 512, 1024]
    for width in list_of_widths:
        convert_bin_to_img(ORG_DATASET_PATH, width, max_files=max_files)

    process_opcodes_bulk(ORG_DATASET_PATH, max_files=max_files)


if __name__ == "__main__":
    main()
